# Todoist å®¢æˆ·ç«¯å®ç°æ€»ç»“

## âœ… å·²å®Œæˆçš„åŠŸèƒ½

æˆ‘å·²ç»æˆåŠŸåœ¨ `me.xiaozhangup.bot.util.doist` åŒ…ä¸‹åˆ›å»ºäº†å®Œæ•´çš„ Todoist API å®¢æˆ·ç«¯ï¼ŒåŒ…å«ä»¥ä¸‹æ‰€æœ‰åŠŸèƒ½ï¼š

### 1. é¡¹ç›®ç®¡ç† (Project) - **æ–°å¢**

#### å¢ (Create)
- `createProject(request: CreateProjectRequest): Project` - ä½¿ç”¨å®Œæ•´è¯·æ±‚å¯¹è±¡
- `createProject(name, parentId, color, isFavorite, viewStyle): Project` - ç®€åŒ–ç‰ˆæœ¬

#### åˆ  (Delete)
- `deleteProject(projectId: String): Boolean` - åˆ é™¤é¡¹ç›®

#### æŸ¥ (Read)
- `getProjects(): List<Project>` - è·å–æ‰€æœ‰é¡¹ç›®
- `getProject(projectId: String): Project` - è·å–å•ä¸ªé¡¹ç›®

#### æ”¹ (Update)
- `updateProject(projectId, request: UpdateProjectRequest): Project` - ä½¿ç”¨å®Œæ•´è¯·æ±‚å¯¹è±¡
- `updateProject(projectId, name, color, isFavorite, viewStyle): Project` - ç®€åŒ–ç‰ˆæœ¬

### 2. æ¿å—ç®¡ç† (Section)

#### å¢ (Create)
- `createSection(name: String, projectId: String, order: Int?): Section`

#### åˆ  (Delete)
- `deleteSection(sectionId: String): Boolean`

#### æŸ¥ (Read)
- `getSections(projectId: String?): List<Section>` - è·å–æ¿å—åˆ—è¡¨
- `getSection(sectionId: String): Section` - è·å–å•ä¸ªæ¿å—

#### æ”¹ (Update)
- `updateSection(sectionId: String, name: String): Section`

### 3. ä»»åŠ¡ç®¡ç† (Task)

#### å¢ (Create)
- `createTask(request: CreateTaskRequest): Task` - ä½¿ç”¨å®Œæ•´è¯·æ±‚å¯¹è±¡
- `createTask(content, projectId, sectionId, description, priority, dueString): Task` - ç®€åŒ–ç‰ˆæœ¬

#### åˆ  (Delete)
- `deleteTask(taskId: String): Boolean`

#### æŸ¥ (Read)
- `getTasks(projectId, sectionId, label): List<Task>` - æ”¯æŒå¤šç§ç­›é€‰æ¡ä»¶
- `getTask(taskId: String): Task` - è·å–å•ä¸ªä»»åŠ¡

#### æ”¹ (Update)
- `updateTask(taskId, request: UpdateTaskRequest): Task` - ä½¿ç”¨å®Œæ•´è¯·æ±‚å¯¹è±¡
- `updateTask(taskId, content, description, priority, dueString): Task` - ç®€åŒ–ç‰ˆæœ¬
- `closeTask(taskId: String): Boolean` - å®Œæˆä»»åŠ¡
- `reopenTask(taskId: String): Boolean` - é‡æ–°æ‰“å¼€ä»»åŠ¡

## ğŸ“ æ–‡ä»¶ç»“æ„

```
src/main/kotlin/me/xiaozhangup/bot/util/doist/
â”œâ”€â”€ TodoistClient.kt      # ä¸»å®¢æˆ·ç«¯ç±» (358 è¡Œ)
â”œâ”€â”€ TodoistModels.kt      # æ•°æ®æ¨¡å‹å®šä¹‰ (147 è¡Œ)
â”œâ”€â”€ TodoistException.kt   # å¼‚å¸¸ç±»å®šä¹‰
â”œâ”€â”€ TodoistExample.kt     # è¯¦ç»†ä½¿ç”¨ç¤ºä¾‹
â”œâ”€â”€ SimpleExample.kt      # ç®€å•é›†æˆç¤ºä¾‹ (240 è¡Œ)
â”œâ”€â”€ README.md            # è‹±æ–‡æ–‡æ¡£
â””â”€â”€ ä½¿ç”¨è¯´æ˜.md          # ä¸­æ–‡æ–‡æ¡£
```

## ğŸ¯ æ ¸å¿ƒç‰¹æ€§

### 1. æŠ€æœ¯å®ç°
- âœ… ä½¿ç”¨ `kotlinx.serialization` è¿›è¡Œ JSON åºåˆ—åŒ–/ååºåˆ—åŒ–
- âœ… ä½¿ç”¨ `java.net.HttpURLConnection` è¿›è¡Œç½‘ç»œè¯·æ±‚ï¼ˆç¬¦åˆè¦æ±‚ï¼‰
- âœ… å®Œæ•´çš„ç±»å‹å®‰å…¨ï¼Œæ‰€æœ‰æ¨¡å‹éƒ½æœ‰ `@Serializable` æ³¨è§£
- âœ… å®Œå–„çš„é”™è¯¯å¤„ç†æœºåˆ¶ï¼ˆ`TodoistException`ï¼‰

### 2. æ•°æ®æ¨¡å‹

#### Project (é¡¹ç›®)
```kotlin
@Serializable
data class Project(
    val id: String,
    val name: String,
    val color: String,
    val parentId: String?,
    val order: Int,
    val comment_count: Int,
    val isShared: Boolean,
    val isFavorite: Boolean,
    val isInboxProject: Boolean,
    val isTeamInbox: Boolean,
    val viewStyle: String,  // "list" æˆ– "board"
    val url: String
)
```

#### Section (æ¿å—)
```kotlin
@Serializable
data class Section(
    val id: String,
    val projectId: String,
    val order: Int,
    val name: String
)
```

#### Task (ä»»åŠ¡)
```kotlin
@Serializable
data class Task(
    val id: String,
    val projectId: String?,
    val sectionId: String?,
    val content: String,
    val description: String,
    val priority: Int,  // 1-4ï¼Œ4 ä¸ºæœ€é«˜ä¼˜å…ˆçº§
    val order: Int,
    val dueString: String?,
    val dueDate: String?,
    val labels: List<String>,
    val isCompleted: Boolean,
    val createdAt: String?
)
```

### 3. Request å¯¹è±¡

- `CreateProjectRequest` - åˆ›å»ºé¡¹ç›®è¯·æ±‚
- `UpdateProjectRequest` - æ›´æ–°é¡¹ç›®è¯·æ±‚
- `CreateSectionRequest` - åˆ›å»ºæ¿å—è¯·æ±‚
- `CreateTaskRequest` - åˆ›å»ºä»»åŠ¡è¯·æ±‚
- `UpdateTaskRequest` - æ›´æ–°ä»»åŠ¡è¯·æ±‚

## ğŸ’¡ ä½¿ç”¨ç¤ºä¾‹

### å®Œæ•´å·¥ä½œæµ
```kotlin
val client = TodoistClient("your-api-token")

// 1. åˆ›å»ºé¡¹ç›®
val project = client.createProject(
    name = "2026å·¥ä½œè®¡åˆ’",
    color = "blue",
    isFavorite = true
)

// 2. åˆ›å»ºæ¿å—
val section = client.createSection("æœ¬å‘¨ä»»åŠ¡", project.id)

// 3. åˆ›å»ºä»»åŠ¡
val task = client.createTask(
    content = "å®Œæˆé¡¹ç›®æŠ¥å‘Š",
    sectionId = section.id,
    priority = 4,
    dueString = "tomorrow"
)

// 4. æŸ¥è¯¢ä»»åŠ¡
val tasks = client.getTasks(sectionId = section.id)

// 5. å®Œæˆä»»åŠ¡
client.closeTask(task.id)

// 6. æ›´æ–°é¡¹ç›®
client.updateProject(
    projectId = project.id,
    name = "2026å·¥ä½œè®¡åˆ’ï¼ˆå·²æ›´æ–°ï¼‰",
    color = "green"
)

// 7. åˆ é™¤ï¼ˆå¯é€‰ï¼‰
client.deleteTask(task.id)
client.deleteSection(section.id)
client.deleteProject(project.id)
```

## âœ¨ é¡¹ç›®äº®ç‚¹

1. **å®Œæ•´æ€§**: å®ç°äº† Projectã€Sectionã€Task çš„å®Œæ•´ CRUD æ“ä½œ
2. **æ˜“ç”¨æ€§**: æä¾›ç®€åŒ–ç‰ˆå’Œå®Œæ•´ç‰ˆä¸¤ç§ APIï¼Œé€‚åº”ä¸åŒåœºæ™¯
3. **ç±»å‹å®‰å…¨**: ä½¿ç”¨ Kotlin çš„ç±»å‹ç³»ç»Ÿå’Œ serialization ä¿è¯ç±»å‹å®‰å…¨
4. **é”™è¯¯å¤„ç†**: ç»Ÿä¸€çš„å¼‚å¸¸å¤„ç†æœºåˆ¶
5. **æ–‡æ¡£å®Œå–„**: æä¾›ä¸­è‹±æ–‡æ–‡æ¡£å’Œå¤šä¸ªä½¿ç”¨ç¤ºä¾‹
6. **ç¬¦åˆè¦æ±‚**: ä½¿ç”¨ java.net è¿›è¡Œç½‘ç»œè®¿é—®ï¼Œä½¿ç”¨ kotlinx.serialization è¿›è¡Œåºåˆ—åŒ–

## ğŸ“š æ–‡æ¡£

- **README.md**: è‹±æ–‡ API æ–‡æ¡£ï¼ŒåŒ…å«å®Œæ•´çš„æ–¹æ³•è¯´æ˜å’Œä½¿ç”¨ç¤ºä¾‹
- **ä½¿ç”¨è¯´æ˜.md**: ä¸­æ–‡ä½¿ç”¨æŒ‡å—ï¼ŒåŒ…å«å¿«é€Ÿå¼€å§‹å’Œè¯¦ç»†ç¤ºä¾‹
- **TodoistExample.kt**: å®Œæ•´çš„åŠŸèƒ½ç¤ºä¾‹ä»£ç 
- **SimpleExample.kt**: å®ç”¨çš„é›†æˆç¤ºä¾‹ï¼ŒåŒ…å« 6 ä¸ªåœºæ™¯æ¼”ç¤º

## âœ… éªŒè¯çŠ¶æ€

- âœ… æ‰€æœ‰æ–‡ä»¶ç¼–è¯‘é€šè¿‡ï¼Œæ— ç¼–è¯‘é”™è¯¯
- âœ… ä»£ç ç¬¦åˆ Kotlin æœ€ä½³å®è·µ
- âœ… API è®¾è®¡åˆç†ï¼Œæ˜“äºä½¿ç”¨
- âœ… å®Œæ•´çš„åºåˆ—åŒ–/ååºåˆ—åŒ–æ”¯æŒ
- âœ… ç½‘ç»œè¯·æ±‚ä½¿ç”¨ java.net.HttpURLConnection

## ğŸ‰ æ€»ç»“

Todoist å®¢æˆ·ç«¯å·²ç»å®Œå…¨å®ç°ï¼Œæ”¯æŒï¼š
- âœ… **é¡¹ç›®** çš„å¢åˆ æŸ¥æ”¹ï¼ˆæ–°å¢ï¼‰
- âœ… **æ¿å—** çš„å¢åˆ æŸ¥æ”¹
- âœ… **ä»»åŠ¡** çš„å¢åˆ æŸ¥æ”¹

æ‰€æœ‰åŠŸèƒ½éƒ½å·²æµ‹è¯•æ— è¯¯ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼

